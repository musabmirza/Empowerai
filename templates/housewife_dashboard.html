{% extends 'base.html' %}
{% block content %}

<div class="container my-5">

    <!-- Header -->
    <div class="text-center mb-5">
        <h2 class="fw-bold">ðŸ‘© Housewife Dashboard</h2>
        <p class="text-muted">
            Welcome, <strong>{{ request.user.username }}</strong> ðŸ‘‹ <br>
            Find work-from-home opportunities tailored to your skills
        </p>
    </div>

    <!-- Cards -->
    <div class="row g-4 justify-content-center">

        <!-- Available Jobs -->
        <div class="col-lg-4 col-md-6">
            <div class="card shadow-sm h-100 border-0">
                <div class="card-body d-flex flex-column justify-content-between">
                    <div>
                        <h5 class="fw-semibold">ðŸ’¼ Available Jobs</h5>
                        <p class="text-muted small">
                            Browse jobs recommended based on your skills
                        </p>
                    </div>
                    <a href="{% url 'jobs_list' %}"
                       class="btn btn-outline-primary rounded-pill mt-3">
                        View Jobs â†’
                    </a>
                </div>
            </div>
        </div>

        <!-- My Applications -->
        <div class="col-lg-4 col-md-6">
            <div class="card shadow-sm h-100 border-0">
                <div class="card-body d-flex flex-column justify-content-between">
                    <div>
                        <h5 class="fw-semibold">ðŸ“‹ My Applications</h5>
                        <p class="text-muted small">
                            Track jobs you have applied to and their status
                        </p>
                    </div>
                    <a href="{% url 'my_applications' %}"
                       class="btn btn-outline-success rounded-pill mt-3">
                        View Applications â†’
                    </a>
                </div>
            </div>
        </div>

        <!-- Resume Card -->
        <div class="col-lg-4 col-md-6">
            <div class="card shadow-sm h-100 border-0">
                <div class="card-body d-flex flex-column justify-content-between">

                    <div>
                        <h5 class="fw-semibold">ðŸ“„ Resume & Skills</h5>
                        <p class="text-muted small">
                            Upload resume to improve job match accuracy
                        </p>

                        {% if request.user.resume %}
                            <span class="badge bg-success mb-2">
                                Resume Uploaded âœ”
                            </span>
                            <div>
                                <a href="{{ request.user.resume.url }}"
                                   target="_blank"
                                   class="btn btn-sm btn-outline-secondary mt-2">
                                   View Resume
                                </a>
                            </div>
                        {% else %}
                            <span class="badge bg-warning text-dark">
                                Resume Not Uploaded
                            </span>
                        {% endif %}
                    </div>

                    <button class="btn btn-primary rounded-pill mt-3"
                            data-bs-toggle="modal"
                            data-bs-target="#resumeModal">
                        Upload / Update Resume
                    </button>

                </div>
            </div>
        </div>

    </div>

    <!-- Logout -->
    <div class="text-center mt-5">
        <a href="{% url 'logout' %}" class="btn btn-sm btn-outline-danger">
            Logout
        </a>
    </div>

</div>

<!-- Resume Upload Modal -->
<div class="modal fade" id="resumeModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <form method="POST"
            action="{% url 'upload_resume' %}"
            enctype="multipart/form-data">
        {% csrf_token %}

        <div class="modal-header">
          <h5 class="modal-title">ðŸ“„ Upload Resume</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          <label class="form-label">Resume (PDF only)</label>
          <input type="file"
                 name="resume"
                 class="form-control"
                 accept=".pdf"
                 required>

          <small class="text-muted d-block mt-2">
            â€¢ Max size: 2 MB <br>
            â€¢ Skills will be auto-extracted for better job matching
          </small>
        </div>

        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">
            Upload & Analyze
          </button>
        </div>

      </form>

    </div>
  </div>
</div>

{% endblock %}
